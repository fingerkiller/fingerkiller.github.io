<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #737373;
    background-color: white;
    margin: 10px 13px 10px 13px;
}
table {
	margin: 10px 0 15px 0;
	border-collapse: collapse;
}
td,th {	
	border: 1px solid #ddd;
	padding: 3px 10px;
}
th {
	padding: 5px 10px;	
}

a {
    color: #0069d6;
}
a:hover {
    color: #0050a3;
    text-decoration: none;
}
a img {
    border: none;
}
p {
    margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    color: #404040;
    line-height: 36px;
}
h1 {
    margin-bottom: 18px;
    font-size: 30px;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}
h4 {
    font-size: 16px;
}
h5 {
    font-size: 14px;
}
h6 {
    font-size: 13px;
}
hr {
    margin: 0 0 19px;
    border: 0;
    border-bottom: 1px solid #ccc;
}
blockquote {
    padding: 13px 13px 21px 15px;
    margin-bottom: 18px;
    font-family:georgia,serif;
    font-style: italic;
}
blockquote:before {
    content:"\201C";
    font-size:40px;
    margin-left:-10px;
    font-family:georgia,serif;
    color:#eee;
}
blockquote p {
    font-size: 14px;
    font-weight: 300;
    line-height: 18px;
    margin-bottom: 0;
    font-style: italic;
}
code, pre {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
    background-color: #fee9cc;
    color: rgba(0, 0, 0, 0.75);
    padding: 1px 3px;
    font-size: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
pre {
    display: block;
    padding: 14px;
    margin: 0 0 18px;
    line-height: 16px;
    font-size: 11px;
    border: 1px solid #d9d9d9;
    white-space: pre-wrap;
    word-wrap: break-word;
}
pre code {
    background-color: #fff;
    color:#737373;
    font-size: 11px;
    padding: 0;
}
sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:10px auto;
    }
}
@media print {
	body,code,pre code,h1,h2,h3,h4,h5,h6 {
		color: black;
	}
	table, pre {
		page-break-inside: avoid;
	}
}
</style>
<title>
<html lang="en">
    <h1 class="entry-title"><a href="http://www.guomii.com/posts/30136</title>

</head>
<body>
<p><html lang="en"></p>

<pre><code><h1 class="entry-title"><a href="http://www.guomii.com/posts/30136" title="OS X Mountain  Lion 系统配置 Apache&amp;#43;Mysql&amp;#43;PHP 详细教程">OS X Mountain Lion 系统配置 Apache&amp;#43;Mysql&amp;#43;PHP 详细教程</a></h1>

<div class="title-meta">

    <div class="title-meta-left">Posted on 2012 年 08 月 06 日 by <a href="http://www.guomii.com/posts/author/eyon" title="由 Eyon 发布" rel="author">

        Eyon</a> </div>

    <div class="title-meta-right"><a href="http://www.guomii.com/posts/30136#comments-title" title="comments">43 Comments</a>

    </div>

</div>

<p>如果你是一名 Web 开发者，很多时候都需要在本地搭建服务器测试环境，比如 Apache&amp;#43;Mysql&amp;#43;PHP 这样的环境。事实上 Mac OS X 中想要搭建这样的环境很简单，本文我们就会将详细的教程分享给大家。</p>

<p>首先需要说明的是，Mac OS X 系统其实已经集成了 Apache&amp;#43;PHP环境，用户手动开启即可。在之前的 OS X 系统中，只需要进入「系统偏好设置——共享」，然后开启「Web 共享」就可以打开 Apache。不过在最新的 Mountain Lion 中苹果取消了这个共享功能的图形界面，只能从命令行开启。</p>

<div id="attachment_30141" class="wp-caption aligncenter" style="width:610px"><img src="http://img.guomii.com/2012/08/Snip20120806_3-600x353.png" alt="" title="Snip20120806_3" class="size-large wp-image-30141" height="353" width="600">

    <p class="wp-caption-text">Mountain Lion 中已经没有”Web共享”</p>

</div>

<h3>启用 Apache/Web 共享</h3>

<p>打开终端，运行启动 Apache 命令：</p>

<blockquote>

    <p>sudo apachectl start</p>

</blockquote>

<p>关闭命令：</p>

<blockquote>

    <p>sudo apachectl stop</p>

</blockquote>

<p>重启命令：</p>

<blockquote>

    <p>sudo apachectl restart</p>

</blockquote>

<p>查看 Apache 版本命令：</p>

<blockquote>

    <p>httpd -v</p>

</blockquote>

<p>Mountain Lion 中集成的 Apache 版本如下：</p>

<blockquote>

    <p>mbp:~ eyon$ httpd -v<br>

    Server version: Apache/2.2.22 (Unix)<br>

    Server built: Jun 20 2012 13:57:09</p>

</blockquote>

<p>启用 Apache 之后，你可以直接在浏览器中访问 http://localhost，如果出现”It works!”就表示运行正常。</p>

<p><img src="http://img.guomii.com/2012/08/Snip20120806_6.png" alt="" title="Snip20120806_6" class="aligncenter size-full wp-image-30144" height="295" width="600"></p>

    <h3>Root 目录</h3>

    <p>启用 Apache 之后，你首先得知道网页文件应该放到哪个目录才能正常运行，相信有过 Linux 服务器配置经验的对此不会陌生。OS X 中默认有两个目录可以直接运行你的 Web 程序，一个是系统级的 Web 根目录，一个是用户级的根目录，大家记下即可。</p>

    <p>系统级的根目录是：</p>

    <blockquote>

        <p>/Library/WebServer/Documents/</p>

    </blockquote>

    <p>它对应的网址是：</p>

    <blockquote>

        <p>http://localhost</p>

    </blockquote>

    <p>用户级的根目录是：</p>

    <blockquote>

        <p>~/Sites</p>

    </blockquote>

    <p><img src="http://img.guomii.com/2012/08/Snip20120806_4.png" alt="" title="Snip20120806_4" class="aligncenter size-full wp-image-30142" height="278" width="502"></p>

        <p>~/Sites 也就是你用户目录下面的”站点”目录，在 OS X Mountain Lion 中，这个目录可能没有，所以你需要手动建立一个同名目录。建立方式很简单，直接在终端中运行：</p>

        <blockquote>

            <p>sudo mkdir ~/Sites</p>

        </blockquote>

        <p>建立”站点”文件夹之后，检查下面这个文件夹下面是不是有”你的用户名.conf”这个文件。</p>

        <blockquote>

            <p>/etc/apache2/users/</p>

        </blockquote>

        <p>如果没有，那么你需要创建一个，取名为”你的用户名.conf”，你可以使用 vi 或者 nano 这两种编辑器之一来创建。</p>

        <blockquote>

            <p>sudo vi /etc/apache2/users/你的用户名.conf</p>

        </blockquote>

        <p>创建之后将下面的这几行内容写到上面的 conf 文件中：</p>

        <blockquote>

            <p><code>&amp;lt;Directory &amp;quot;/Users/username/Sites/&amp;quot;&amp;gt;<br>

                Options Indexes MultiViews<br>

                AllowOverride All<br>

                Order allow,deny<br>

                Allow from all<br>

                &amp;lt;/Directory&amp;gt;</code></p>

        </blockquote>

        <p>文件保存之后，给它赋予相应的权限：</p>

        <blockquote>

            <p>sudo chmod 755 /etc/apache2/users/你的用户名.conf</p>

        </blockquote>

        <p>接下来重启 Apache，以使该配置文件生效：</p>

        <blockquote>

            <p>sudo apachectl restart</p>

        </blockquote>

        <p>之后你就可以通过浏览器访问你的用户级目录网页了，你可以随便防个网页进去测试一下。根目录地址为：</p>

        <blockquote>

            <p>http://localhost/~username/</p>

        </blockquote>

        <p>(请将username改成你的用户名)</p>

        <h3>启用 PHP</h3>

        <p>Mountain Lion 中已经集成了 PHP 5.3.13 版本，也需要手动开启。你可以用 vi 或者 nano 编辑器打开下面这个文件：</p>

        <blockquote>

            <p>sudo nano /etc/apache2/httpd.conf</p>

        </blockquote>

        <p>然后搜索”php”，第一条匹配的应该是下面这句代码：</p>

        <p>LoadModule php5_module libexec/apache2/libphp5.so</p>

        <p>请将这句代码前面的#去掉，然后保存文件。</p>

        <p>接下来再一次重启 Apache：</p>

        <blockquote>

            <p>sudo apachectl restart</p>

        </blockquote>

        <p>现在 PHP 应该已经开始工作了，你可以在用户级根目录下(~/Sites/)放一个PHP测试文件，代码如下：</p>

        <blockquote>

            <p>&amp;lt;?php phpinfo(); ?&amp;gt;</p>

        </blockquote>

        <h3>安装 MySQL</h3>

        <p>Mountain Lion 中并没有集成 Mysql，需要手动安装。你可以<a href="http://dev.mysql.com/downloads/mysql/">点击这个链接下载 MySQL 的安装包</a>，请下载 Mac OS X ver. 10.6 (x86, 64-bit), DMG Archive(可以在 Mountain Lion 下正常工作)。</p>

        <p>点击下载之后，会跳转到一个注册/登录页面，你不需要注册也不需要登录，直接点登录框下面的：No thanks, just take me to the downloads! 就可以跳过这个步骤直接开始下载了，整个 DMG 包大约是113MB。</p>

        <p><img src="http://img.guomii.com/2012/08/Snip20120806_5-600x403.png" alt="" title="Snip20120806_5" class="aligncenter size-large wp-image-30145" height="403" width="600"></p>

            <p>下载完DMG之后，双击你会提取出三个文件和一个 RedMe.txt 文档。这三个文件分别是：</p>

            <ul>

                <li>mysql5.5.xxx.pkg</li><li>MySQLstartupitem.pkg</li><li>MySQLPrefPane</li></ul>

            <p>你需要逐一安装这三个文件，双击之后系统可能会提示你由于该软件包来自身份不明的开发者，不能安装。遇到这种情况，你可以按住 command 键，然后右键点击安装文件，再点击右键菜单中的”打开”，这样就可以绕过这个安全限制了(当然你也可以在系统偏好设置——安全性与隐私——通用中改成可打开”任何来源”的应用程序)。</p>

            <p>三个文件都安装完成之后，进入「系统偏好设置」，在面板的最下面你会看到一个 MySQL 的设置项，点击它之后就可以启动MySQL，或者你也可以通过下面的命令开启：</p>

            <blockquote>

                <p>sudo /usr/local/mysql/support-files/mysql.server start</p>

            </blockquote>

            <p>如果你想查看 MySQL 的版本，可以用下面这个命令：</p>

            <blockquote>

                <p>/usr/local/mysql/bin/mysql -v</p>

            </blockquote>

            <p>运行上面这个命令之后，会直接从命令行中登录到 MySQL，输入命令 \q 即可退出。</p>

            <p><img src="http://img.guomii.com/2012/08/Snip20120806_2-600x297.png" alt="" title="Snip20120806_2" class="aligncenter size-large wp-image-30143" height="297" width="600"></p>

                <p>到这里 MySQL 已经配置完成，并且可以运行。但为了更加方便使用，你最好再设置一下系统环境变量，也就是让 mysql 这个命令在任何路径都可以直接启动(不需要输入一长串的准确路径)。</p>

                <p>设置环境变量也很方便，直接用命令(这里笔者用 vi 编辑器举例)：</p>

                <blockquote>

                    <p>cd ; vi .bash_profile</p>

                </blockquote>

                <p>然后按字母 i 进入编辑模式，将下面的这句代码贴进去：</p>

                <blockquote>

                    <p><code>export PATH=&amp;quot;/usr/local/mysql/bin:$PATH&amp;quot;</code></p>

                </blockquote>

                <p>然后按 esc 退出编辑器，再输入 :wq(别忘了冒号)保存退出。当然你如果使用 nano 或者别的编辑器的话，操作方式跟这个可能不一样，反正意思就是将上面那句话写入到 .bash_profile 文件中。</p>

                <p>接下来还要重新加载一下 Shell 以让上面的环境变量生效：</p>

                <blockquote>

                    <p>source ~/.bash_profile</p>

                </blockquote>

                <p>之后你就可以在终端的任意目录使用 mysql 命令了，你可以运行 mysql -v 试试。</p>

                <p>最后一步，你还应该给你的 MySQL 设置一个 root 用户密码，命令如下：</p>

                <blockquote>

                    <p><code>mysqladmin -u root password '这里填你要设置的密码'</code></p>

                </blockquote>

                <p>(请记住密码一定要用半角单引号包起来)</p>

                <p>上面的 mysqladmin 命令，我没有写完整路径。因为上面我们已经设置了环境变量，如果你没有设置环境变量的话，就需要用/usr/local/mysql/bin/mysqladmin ******** 来运行。</p>

                <h3>安装 phpMyAdmin</h3>

                <p>在安装 phpMyAdmin 之前，请首先修复 2002 socket 错误：</p>

                <blockquote>

                    <p>sudo mkdir /var/mysql</p>

                    <p>sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock</p>

                </blockquote>

                <p>然后<a href="http://www.phpmyadmin.net/home_page/downloads.php">去 phpMyAdmin 网站下载安装包</a>，推荐下载 english.tar.gz。解压之后，将解压出来的文件夹改名为”phpmyadmin”，并放到上面建立的”站点”目录下(~/Sites)。然后在 phpmyadmin 下建立一个 config 文件夹：</p>

                <blockquote>

                    <p>mkdir ~/Sites/phpmyadmin/config</p>

                </blockquote>

                <p>修改权限:</p>

                <blockquote>

                    <p>chmod o&amp;#43;w ~/Sites/phpmyadmin/config</p>

                </blockquote>

                <p>之后就可以从浏览器中访问phpmyadmin的初始设置页面了:</p>

                <blockquote>

                    <p>http://localhost/~username/phpmyadmin/setup/</p>

                </blockquote>

                <p>(请将 username 修改成你的用户名)</p>

                <p>打开页面之后，基本上不需要配置。进去之后点击”New server”，在 Basic settings 页面确保 Serverhostname 是 localhost，在 Authentication 配置好登陆用户名和密码(之前设置的 root 密码)，点击保存就可以了。</p>

                <p>phpMyAdmin配置完成之后，上面建立的 /config 目录中会出现一个 config.inc.php 文件，将这个文件移到 phpmyadmin 根目录(上一级)，然后删除这个空的 /config 目录。</p>

                <p>到这里就算完成了，接下来你就可以访问 http://localhost/~username/phpmyadmin/ (将username替换成你的用户名)来通过 phpmysql 管理你的数据库了。</p>

                <p>以上便是在 OS X Mountain Lion 上配置 Apache&amp;#43;Mysql&amp;#43;Php 的完整教程。如果大家有任何不明白的地方，请在下面评论框中提问。</p>
</code></pre>
</body>
</html>